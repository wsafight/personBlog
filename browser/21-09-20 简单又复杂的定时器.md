在开发项目的过程中，开发者对于 setTimeout 的使用非常普遍。乍一看，一些复杂问题似乎解决了。但实际上，如果你不清楚问题为什么能解决。那么 bug 仍旧会出现。

## 深入事件循环

了解 JavaScript 引擎如何处理异步代码是非常重要的。它是创建高效 web 网站的基础。

事件循环至少有两个事件队列(实际实现会有更多，但市面上 JavaScript 执行环境非常多)：宏任务队列和微任务队列。

- 一次只能处理一个任务
- 一个任务在执行时候也不会被另一个任务中断

我们可以看到的细节
- 两类任务队列都是独立于时间循环之外，意味着任务的检查添加行为也在时间循环之外。同时也表明了 JavaScript 引擎一定不是单线程的。
- 所有微任务都会在下次渲染之前执行完成

事件循环任务代表浏览器执行的行为。任务分为 2 类
- 宏任务 独立的浏览器操作，如创建主文档对象、处理事件、更改 URL 等。
- 微任务 尽快执行的任务，Promise 回调，DOM 突变

## 定时器

### 延迟执行和间隔执行

## 其他

### 如何定时执行任务

从上文分析中，我们可以看到，无论是走微任务还是宏任务，都没有办法保证回调精准执行。
