# 前端开发中的依赖注入

依赖注入是一项简单而又有用的技巧，不同的是它大量用于服务端开发，前端者往往忽略了这么一项实用性的技巧。下面由我带则会大家来看看有用的技巧如何巧妙的解决了前端开发中的问题。

## 循环引用



## 依赖升级

> 因为我觉得一个库，若想被人当作黑盒子去使用,以后也被当成黑盒子来维护，甚至可以用别的盒子区替代它，关键的一点就是接口简单。这个简单包括了使用最少的概念、需要最少的知识去理解它。

以上文字节选自云风大佬的 [libuv 初窥]()，但是库的开发者考虑的业务项毕竟是自己的，可能不符合每个实际用户。

如果面对较为复杂的接口，我们完全可以在依赖注入时封装一层，以便其他的。


## 思维修改

依赖注入的思维习惯是自上而下的编程思维，即先思考包之间的逻辑关系，而不需要真的先去实现它。

## 集中式管理




## 自动注入依赖

在该函数没有出来之前，我一直使用前面的格式来决策开发。

```ts
// container.ts
import { makeFastRandomNumber } from "./fastRandomNumber";
import { makeRandomNumberList } from "./randomNumberList";
import { secureRandomNumber } from "secureRandomNumber";

const dependenciesFactories = {
  randomNumber:
    process.env.NODE_ENV !== "production"
      ? makeFastRandomNumber
      : () => secureRandomNumber,

  randomNumberList: makeRandomNumberList,
  randomGenerator: () => Math.random,
};

type DependenciesFactories = typeof dependenciesFactories;

export type Container = {
  [Key in DependenciesFactories]: ReturnValue<DependenciesFactories[Key]>;
};

export const container = {} as Container;

Object.entries(dependenciesFactories).forEach(([dependencyName, factory]) => {
  return Object.defineProperty(container, dependencyName, {
    get: () => factory(container),
  });
});
```



## 实用框架

其实采用了之前的自动注入依赖已然解决前端开发中大部分问题了。我们这里继续聊聊